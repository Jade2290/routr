{
  "kind": "MessageDispatcher",
  "apiVersion": "v2draft1",
  "metadata": {
    "ref": "mr001"
  },
  "spec": {
    "bindAddr": "0.0.0.0:51901",
    "middlewares": [
      {
        "ref": "simpleauth",
        "addr": "localhost:51903"
      }
    ],
    "processors": [
      {
        "ref": "echo-processor",
        "addr": "localhost:51904",
        "methods": [
          "MESSAGE"
        ],
        "matchFunc": "req => req.method === 'MESSAGE'"
      },
      {
        "ref": "connect-processor",
        "addr": "localhost:51904",
        "methods": [
          "REGISTER",
          "MESSAGE",
          "INVITE",
          "ACK",
          "BYE",
          "CANCEL"
        ],
        "matchFunc": "req => true"
      }
    ]
  }
}