{
  "kind": "MessageDispatcher",
  "apiVersion": "v2draft1",
  "metadata": {
    "ref": "mr001"
  },
  "spec": {
    "bindAddr": "0.0.0.0:51901",
    "middlewares": [
      {
        "ref": "simpleauth",
        "addr": "localhost:51903"
      }
    ],
    "processors": [
      {
        "ref": "echo-processor",
        "addr": "192.168.1.3:51905",
        "methods": [
          "MESSAGE",
          "REGISTER"
        ],
        "matchFunc": "(req) => req.method === 'MESSAGE' || req.method === 'REGISTER'"
      },
      {
        "ref": "connect-processor",
        "addr": "localhost:51904",
        "methods": [
          "REGISTER",
          "MESSAGE",
          "INVITE",
          "CANCEL"
        ],
        "matchFunc": "(req) => true"
      }
    ]
  }
}
