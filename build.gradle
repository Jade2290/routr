buildscript {
  repositories {
    mavenCentral()
    jcenter()
    maven { url 'https://jitpack.io' }
  }
}

plugins {
  id 'org.jetbrains.kotlin.jvm' version '1.3.72'
}

test {
  useJUnitPlatform()
}

allprojects {
  repositories {
    maven { url 'https://jitpack.io' }
  }
}

dependencies {
  compile 'org.apache.logging.log4j:log4j-core:2.17.0'
  compile 'org.apache.logging.log4j:log4j-1.2-api:2.17.0'
  compile 'javax.sip:jain-sip-ri:1.2.324' // Newer versions of JAIN-SIP are causing critical regression with Routr
  compile 'com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.9.5'
  compile 'com.fasterxml.jackson.core:jackson-databind:2.9.6'
}

configurations.all {
  // Mutes 3rd party loggers
  exclude group: 'ch.qos.logback', module: 'logback-classic'
  exclude group: 'ch.qos.logback', module: 'logback-core'
}

repositories {
  mavenCentral()
}

tasks.withType(Jar) {
  destinationDir = file("$rootDir/libs")
}

task copyRuntimeLibs(type: Copy) {
  into 'libs'
  from configurations.testRuntime
}
