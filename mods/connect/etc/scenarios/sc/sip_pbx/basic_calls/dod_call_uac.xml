<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE scenario SYSTEM "sipp.dtd">

<scenario name="UAC INVITE">
  <Global variables="requestURI,from,to" />

  <send retrans="500">
    <![CDATA[
        INVITE [$requestURI];transport=[transport] SIP/2.0
        Via: SIP/2.0/[transport] [local_ip]:[local_port];rport;branch=[branch]
        Max-Forwards: 70
        From: "John Doe" <[$from]>;tag=[call_number]
        To: <[$to]>
        Contact: <sip:sipp@[local_ip]:[local_port];transport=[transport]>
        Call-ID: [call_id]
        CSeq: 1 INVITE
        Content-Type: application/sdp
        Content-Length: [len]
        v=0
        o=user1 53655765 2353687637 IN IP[local_ip_type] [local_ip]
        s=-
        c=IN IP[media_ip_type] [media_ip]
        t=0 0
        m=audio [media_port] RTP/AVP 0
        a=rtpmap:0 PCMU/8000
      ]]>
  </send>

  <recv response="100" optional="true"/>
  <recv response="401" auth="true" rtd="true"/>

  <send>
    <![CDATA[
      ACK sip:[service]@[remote_ip]:[remote_port] SIP/2.0
      [last_Via]
      [last_From]
      [last_To]
      [last_Contact]
      Call-ID: [call_id]
      CSeq: 1 ACK
      Max-Forwards: 70
      Content-Length: 0
    ]]>
  </send>

  <send retrans="500">
    <![CDATA[
        INVITE [$requestURI];transport=[transport] SIP/2.0
        Via: SIP/2.0/[transport] [local_ip]:[local_port];rport;branch=[branch]
        Max-Forwards: 70
        From: "John Doe" <[$from]>;tag=[call_number]
        To: <[$to]>
        Contact: <sip:sipp@[local_ip]:[local_port];transport=[transport]>
        Call-ID: [call_id]
        CSeq: 1 INVITE
        Content-Type: application/sdp
        [authentication]
        Content-Length: [len]
        v=0
        o=user1 53655765 2353687637 IN IP[local_ip_type] [local_ip]
        s=-
        c=IN IP[media_ip_type] [media_ip]
        t=0 0
        m=audio [media_port] RTP/AVP 0
        a=rtpmap:0 PCMU/8000
      ]]>
  </send>

  <recv response="100" optional="true"/>
  <recv response="180" optional="true" />
  <recv response="183" optional="true" />
  <recv response="200" rtd="true" />

  <!--Send ack to contact address -->
  <send>
    <![CDATA[
      ACK sip:1002@127.0.0.1:7060;transport=UDP SIP/2.0
      [last_Via]
      [last_From]
      [last_To]
      [last_Contact]
      Call-ID: [call_id]
      CSeq: 1 ACK
      Max-Forwards: 70
      Content-Length: 0
    ]]>
  </send>

  <pause />

  <send retrans="500">
    <![CDATA[
      BYE sip:1002@127.0.0.1:7060;transport=UDP SIP/2.0
      Via: SIP/2.0/[transport] [local_ip]:[local_port];rport;branch=[branch]
      [last_From]
      [last_To]
      [last_Contact]
      Call-ID: [call_id]
      CSeq: 2 BYE
      Max-Forwards: 70
      Content-Length: 0
    ]]>
  </send>

  <recv response="401" auth="true" rtd="true"/>

  <send retrans="500">
    <![CDATA[
      BYE sip:1002@127.0.0.1:7060;transport=UDP SIP/2.0
      Via: SIP/2.0/[transport] [local_ip]:[local_port];rport;branch=[branch]
      [last_From]
      [last_To]
      [last_Contact]
      Call-ID: [call_id]
      [authentication]
      CSeq: 2 BYE
      Max-Forwards: 70
      Content-Length: 0
    ]]>
  </send>

  <recv response="200" crlf="true" />
</scenario>